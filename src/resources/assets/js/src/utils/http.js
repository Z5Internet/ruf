"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function DMFetch(e,r,t,o,n){o||(o={}),_config2.default&&_config2.default.dataDomain&&(e=_config2.default.dataDomain+e);var u={};u["X-XSRF-TOKEN"]=_jsCookie2.default.get("XSRF-TOKEN"),u["X-Requested-With"]="XMLHttpRequest";var a=window.reduxStore.getState().user;if(a&&a.currentTeam&&(u["X-Current-Team"]=a.currentTeam.id),u.Authorization="Bearer as",u["X-Pusher-ID"]=a.pusherId,u["X-Pusher-Connection-ID"]=a.pusherConnId,u.Accept="application/json","GET"!=r&&t&&(u["Content-Type"]="application/json"),t&&n)throw new Error("Can not have both json and formdata in a request");return t?t=JSON.stringify(t):n instanceof FormData&&(t=n),fetch(e,{method:r,headers:u,credentials:"include",body:t}).then(function(e){return 4==Math.floor(e.status/100)?(document.location="/logout",{}):o.returnResponse?e:o.returnAllData?responseToJson(e):returnDataFromResponse(e)})}function returnDataFromResponse(e){return responseToJson(e).then(function(e){if(e.errors)for(var r=0;r<e.errors.length;r++)(0,_errorModal2.default)(e.errors[r].message);return e.data})}function responseToJson(e){return e.json()}var _jsCookie=require("js-cookie"),_jsCookie2=_interopRequireDefault(_jsCookie),_errorModal=require("./errorModal"),_errorModal2=_interopRequireDefault(_errorModal),_config=require("../../../../../../../../../resources/assets/react-app/config"),_config2=_interopRequireDefault(_config),Http={get:function(e,r,t,o){return DMFetch(e,"GET",r,t,o)},post:function(e,r,t,o){return DMFetch(e,"POST",r,t,o)},put:function(e,r,t,o){return DMFetch(e,"PUT",r,t,o)},delete:function(e,r,t,o){return DMFetch(e,"DELETE",r,t,o)}};module.exports=Http;