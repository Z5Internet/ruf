"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function DMFetch(e,t,n,o,r){o||(o={}),_config2.default&&_config2.default.dataDomain&&(e=_config2.default.dataDomain+e);var a={};a["X-Requested-With"]="XMLHttpRequest";var u=window.reduxStore.getState().user;if(u&&u.currentTeam&&(a["X-Current-Team"]=u.currentTeam.id),a["X-Socket-ID"]=u.socketId,a.Accept="application/json","GET"!=t&&n&&(a["Content-Type"]="application/json"),n&&r)throw new Error("Can not have both json and formdata in a request");if(n?n=JSON.stringify(n):r instanceof FormData&&(n=r),new URLSearchParams(document.location.search).get("noLogin")){var i=e.split("?");i[1]||(i[1]=""),i[1]="noLogin=1&"+i[1],e=i.join("?",i)}return fetch(e,{method:t,headers:a,credentials:"include",body:n}).then(function(e){if(401==e.status){var t=window.location.search;return t=t.replace("noLogin=1",""),document.location="/login?redi="+encodeURIComponent(document.location.pathname+t),{}}return 406==e.status?void(document.location="/logout"):4==Math.floor(e.status/100)?{}:o.returnResponse?e:o.returnAllData?responseToJson(e):returnDataFromResponse(e)})}function returnDataFromResponse(e){return responseToJson(e).then(function(e){if(e.errors)for(var t=0;t<e.errors.length;t++)!function(t){import("./errorModal").then(function(n){n.default(e.errors[t].message)})}(t);return e.data})}function responseToJson(e){return e.json()}Object.defineProperty(exports,"__esModule",{value:!0});var _config=require("../../../../../../../../../resources/assets/react-app/config"),_config2=_interopRequireDefault(_config),Http={get:function(e,t,n,o){return DMFetch(e,"GET",t,n,o)},post:function(e,t,n,o){return DMFetch(e,"POST",t,n,o)},put:function(e,t,n,o){return DMFetch(e,"PUT",t,n,o)},delete:function(e,t,n,o){return DMFetch(e,"DELETE",t,n,o)}};exports.default=Http;