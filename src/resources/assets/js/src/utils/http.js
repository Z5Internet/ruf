"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function DMFetch(e,t,r,n,o){n||(n={}),_config2.default&&_config2.default.dataDomain&&(e=_config2.default.dataDomain+e);var a={};a["X-Requested-With"]="XMLHttpRequest";var u=window.reduxStore.getState().user;if(u&&u.currentTeam&&(a["X-Current-Team"]=u.currentTeam.id),a["X-Socket-ID"]=u.socketId,a.Accept="application/json","GET"!=t&&r&&(a["Content-Type"]="application/json"),r&&o)throw new Error("Can not have both json and formdata in a request");return r?r=JSON.stringify(r):o instanceof FormData&&(r=o),fetch(e,{method:t,headers:a,credentials:"include",body:r}).then(function(e){return 401==e.status?(document.location="/logout",{}):4==Math.floor(e.status/100)?{}:n.returnResponse?e:n.returnAllData?responseToJson(e):returnDataFromResponse(e)})}function returnDataFromResponse(e){return responseToJson(e).then(function(e){if(e.errors)for(var t=0;t<e.errors.length;t++)!function(t){(0,_errorModal2.default)(function(r){r(e.errors[t].message)})}(t);return e.data})}function responseToJson(e){return e.json()}var _errorModal=require("bundle-loader?lazy!./errorModal"),_errorModal2=_interopRequireDefault(_errorModal),_config=require("../../../../../../../../../resources/assets/react-app/config"),_config2=_interopRequireDefault(_config),Http={get:function(e,t,r,n){return DMFetch(e,"GET",t,r,n)},post:function(e,t,r,n){return DMFetch(e,"POST",t,r,n)},put:function(e,t,r,n){return DMFetch(e,"PUT",t,r,n)},delete:function(e,t,r,n){return DMFetch(e,"DELETE",t,r,n)}};module.exports=Http;