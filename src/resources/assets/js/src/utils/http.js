"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function DMFetch(e,r,t,n,o){n||(n={}),_config2.default&&_config2.default.dataDomain&&(e=_config2.default.dataDomain+e);var a={};a["X-Requested-With"]="XMLHttpRequest";var u=window.reduxStore.getState().user;if(u&&u.currentTeam&&(a["X-Current-Team"]=u.currentTeam.id),a.Authorization="Bearer as",a["X-Pusher-ID"]=u.pusherId,a["X-Pusher-Connection-ID"]=u.pusherConnId,a.Accept="application/json","GET"!=r&&t&&(a["Content-Type"]="application/json"),t&&o)throw new Error("Can not have both json and formdata in a request");return t?t=JSON.stringify(t):o instanceof FormData&&(t=o),fetch(e,{method:r,headers:a,credentials:"include",body:t}).then(function(e){return 4==Math.floor(e.status/100)?(document.location="/logout",{}):n.returnResponse?e:n.returnAllData?responseToJson(e):returnDataFromResponse(e)})}function returnDataFromResponse(e){return responseToJson(e).then(function(e){if(e.errors)for(var r=0;r<e.errors.length;r++)(0,_errorModal2.default)(e.errors[r].message);return e.data})}function responseToJson(e){return e.json()}var _errorModal=require("./errorModal"),_errorModal2=_interopRequireDefault(_errorModal),_config=require("../../../../../../../../../resources/assets/react-app/config"),_config2=_interopRequireDefault(_config),Http={get:function(e,r,t,n){return DMFetch(e,"GET",r,t,n)},post:function(e,r,t,n){return DMFetch(e,"POST",r,t,n)},put:function(e,r,t,n){return DMFetch(e,"PUT",r,t,n)},delete:function(e,r,t,n){return DMFetch(e,"DELETE",r,t,n)}};module.exports=Http;